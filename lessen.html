<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Studeren met Shania ğŸ’–</title>
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<style>
body { font-family: 'Comic Sans MS', cursive, sans-serif; margin:0; padding:20px; background: #FFF0F5; overflow-x: hidden; }
h1 { text-align:center; color:#FF69B4; }
.lesson-list, .lesson-content { background:#FFF; padding:20px; margin-bottom:20px; border-radius:15px; box-shadow: 0 4px 10px rgba(255,105,180,0.2); transition: all 0.3s ease; }
.lesson-list li a { text-decoration: none; color: #FF69B4; transition: all 0.3s ease; }
.lesson-list li a:hover { background: #FF85C1; color:white; padding:3px 6px; border-radius:8px; }
button { padding:10px 15px; border:none; border-radius:12px; cursor:pointer; background:#FF69B4; color:white; margin:5px; transition: transform 0.2s; }
button:hover { transform: scale(1.1); background:#FF85C1; }
button:disabled { background:#FFB6C1; cursor: not-allowed; transform: none; }
#editor-container { height:200px; background:#FFF; border-radius:10px; }
#lessonPreview { background:#FFF0F5; padding:15px; border-radius:10px; margin-bottom:10px; min-height:50px; opacity:0; transition: opacity 0.3s ease; }
.settings-panel { margin-top:15px; background:#FFE4E1; padding:10px; border-radius:10px; }
input, select { margin:3px 0; }

/* Klik-bloemetjes */
.cursor-flower {
  position: absolute;
  font-size: 20px;
  pointer-events: none;
  transition: transform 0.5s ease, opacity 0.5s ease;
}
</style>
</head>
<body>

<h1>Studeren met Shania ğŸ’–</h1>

<div class="lesson-list">
<h2>Bestaande Lessen</h2>
<ul id="lessons"></ul>
<button onclick="newLesson()">â• Nieuwe Les</button>
</div>

<div class="lesson-content" id="lessonContent">
<h2 id="lessonTitle">Nieuwe / Bewerken Les</h2>
<div id="lessonPreview"></div>
<input id="newLessonTitle" type="text" placeholder="Titel van de les" style="width:100%; padding:8px; margin-bottom:5px; border-radius:8px; border:1px solid #FFB6C1;" />
<div id="editor-container"></div>
<button onclick="saveLesson()">ğŸ’¾ Opslaan / Toevoegen</button>
<button id="deleteLessonBtn">ğŸ—‘ï¸ Les verwijderen</button>
<button onclick="exportLessons()">ğŸ“¤ Exporteer Lessen</button>
<input type="file" id="importFile" />
<button onclick="importLessons()">ğŸ“¥ Importeer Lessen</button>

<div class="settings-panel">
<h3>Layout instellingen ğŸŒ¸</h3>
<label>Achtergrondkleur: <input type="color" id="bgColor" value="#FFF0F5"></label><br>
<label>Lettertype: 
<select id="fontFamily">
<option value="'Comic Sans MS', cursive, sans-serif">Comic Sans</option>
<option value="Arial, sans-serif">Arial</option>
<option value="Georgia, serif">Georgia</option>
<option value="Verdana, sans-serif">Verdana</option>
</select></label><br>
<label>Paddings (px): <input type="number" id="padding" value="20"></label>
<button onclick="applyLayout()">âœ¨ Pas layout toe</button>
</div>
</div>

<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
const defaultLessons = [{
  title: "Les 1: Introductie tot Multilevel Analyse",
  content: `<p>Multilevel analyse wordt gebruikt bij geneste data (bijv. studenten binnen scholen).</p><p>Doel: individuele en groepsinvloeden tegelijk analyseren.</p><p>Voorbeelden:<br>- Sociologie: schoolsucces studenten<br>- Sociale psychologie: groepsnormen effect op gedrag</p>`
}];

let lessons = JSON.parse(localStorage.getItem('lessons')) || defaultLessons;
let currentIndex = null;
const quill = new Quill('#editor-container', { theme: 'snow' });
const titleInput = document.getElementById('newLessonTitle');
const deleteBtn = document.getElementById('deleteLessonBtn');

function saveToStorage() { localStorage.setItem('lessons', JSON.stringify(lessons)); }

function renderLessonList() {
  const list = document.getElementById('lessons');
  list.innerHTML = '';
  lessons.forEach((lesson,index)=>{
    const li = document.createElement('li');
    li.innerHTML = `<a href='#'>${lesson.title}</a>`;
    li.querySelector('a').addEventListener('click', () => selectLesson(index));
    list.appendChild(li);
  });
}

function updatePreview() {
  const preview = document.getElementById('lessonPreview');
  preview.innerHTML = `<h3>${titleInput.value}</h3>` + quill.root.innerHTML;
  preview.style.opacity = 0;
  setTimeout(()=>preview.style.opacity=1, 10);
}

function editLesson(index) {
  currentIndex = index;
  const lesson = lessons[index];
  document.getElementById('lessonTitle').innerText = lesson.title;
  quill.root.innerHTML = lesson.content;
  titleInput.value = lesson.title;
  updatePreview();
  deleteBtn.disabled = lessons.length === 0;
}

function saveCurrentLesson() {
  if(currentIndex !== null){
    lessons[currentIndex].title = titleInput.value || 'Nieuwe Les';
    lessons[currentIndex].content = quill.root.innerHTML;
    saveToStorage();
    renderLessonList();
    updatePreview();
    deleteBtn.disabled = lessons.length === 0;
  }
}

function selectLesson(index) { saveCurrentLesson(); editLesson(index); }
function newLesson() { saveCurrentLesson(); lessons.push({title:'Nieuwe Les', content:''}); editLesson(lessons.length - 1); }

function saveLesson() {
  saveCurrentLesson();
  confetti({
    particleCount:100,
    spread:70,
    origin:{y:0.6},
    shapes: ['heart','circle'],
    colors:['#FF69B4','#FFB6C1','#FFD1DC']
  });
}

function deleteCurrentLesson() {
  if(currentIndex === null) return;
  if(confirm('Weet je zeker dat je deze les wilt verwijderen?')) {
    lessons.splice(currentIndex, 1);
    saveToStorage();
    renderLessonList();
    if(lessons.length > 0){ currentIndex = currentIndex >= lessons.length ? lessons.length-1 : currentIndex; editLesson(currentIndex); }
    else { lessons.push({title:'Nieuwe Les', content:''}); currentIndex=0; editLesson(0); }
  }
}

deleteBtn.addEventListener('click', deleteCurrentLesson);
quill.on('text-change', () => { updatePreview(); saveCurrentLesson(); });
titleInput.addEventListener('input', () => { updatePreview(); saveCurrentLesson(); });

function exportLessons() {
  saveCurrentLesson();
  const blob = new Blob([JSON.stringify(lessons,null,2)], {type:'application/json'});
  const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'lessen.json'; a.click();
}

function importLessons() {
  const fileInput = document.getElementById('importFile');
  if(!fileInput.files[0]){ alert('Selecteer een bestand.'); return; }
  const reader = new FileReader();
  reader.onload=function(e){
    try{
      saveCurrentLesson();
      const imported = JSON.parse(e.target.result);
      lessons = imported.map(l => ({title:l.title || 'Nieuwe Les', content:l.content || ''}));
      saveToStorage();
      renderLessonList();
      editLesson(0);
    } catch(err){ alert('Ongeldig bestand.'); }
  };
  reader.readAsText(fileInput.files[0]);
}

function applyLayout(){
  document.body.style.backgroundColor = document.getElementById('bgColor').value;
  document.body.style.fontFamily = document.getElementById('fontFamily').value;
  const padding = parseInt(document.getElementById('padding').value);
  document.querySelectorAll('.lesson-list, .lesson-content').forEach(el=>el.style.padding=padding+'px');
}

/* Cursor-bloemetjes bij klikken */
document.addEventListener('click', e => {
  const bloom = document.createElement('div');
  bloom.className = 'cursor-flower';
  bloom.style.left = (e.clientX - 10) + 'px';
  bloom.style.top = (e.clientY - 10) + 'px';
  bloom.innerText = 'ğŸŒ¸';
  document.body.appendChild(bloom);
  setTimeout(() => {
    bloom.style.transform = 'scale(1.5)';
    bloom.style.opacity = '0';
  }, 10);
  setTimeout(() => bloom.remove(), 500);
});

renderLessonList();
editLesson(0);
</script>
</body>
</html>
